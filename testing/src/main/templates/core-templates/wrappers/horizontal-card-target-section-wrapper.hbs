{
    "template_id": "horizontal-card-target-section-wrapper",
    "layout": 
        {{#not user_tag.isEmpty}}
            {{{template 'core-horizontal-cards-section' subHeader=subHeader aspectRatio=aspectRatio horizontalCardItems=horizontalCardItems item.userTag=userTag}}} 
        {{else}}
            {{{template 'core-empty-pml-section'}}}
        {{/not}},
    "context": {
        "user_tag_to_filter": {
            "$param": "userTag"
        },
        "user_tag": {
            "$query": "SELECT * FROM user_tags WHERE id IN (${user_tag_to_filter})"
        }
    },
    "metadata": {
        "title": "Horizontal Cards Fully Targeted",
        "type": "BLOCK",
        "description": "Display fully targeted product cards horizontally",
        "preview_image": {
            "url": "https://picnic-nl-dev-images.s3.amazonaws.com/store-page-configurator/387e4bf98d73b9c88305afdbb52b1ed782841f2cae021c2ea889e3d650f8cf86/large.png"
        },
        "properties_schema": "{\"required\":[\"aspectRatio\",\"horizontalCardItems\",\"userTag\"],\"properties\":{\"subHeader\":{\"name\":\"subHeader\",\"$id\":\"subHeader\",\"title\":\"Sub Header\",\"type\":\"object\",\"required\":[\"title\"],\"properties\":{\"title\":{\"name\":\"title\",\"$id\":\"subHeader.title\",\"title\":\"Title\",\"type\":\"string\",\"minLength\":1,\"errorMessage\":{\"minLength\":\"Subheader title should not be empty\"}},\"subHeaderButton\":{\"name\":\"subHeaderButton\",\"$id\":\"subHeader.subHeaderButton\",\"title\":\"Sub Header Button\",\"type\":\"object\",\"required\":[\"deeplink\",\"title\",\"textColor\"],\"properties\":{\"deeplink\":{\"name\":\"deeplink\",\"$id\":\"subHeader.subHeaderButton.deeplink\",\"title\":\"Deeplink\",\"type\":\"string\",\"pattern\":\"^[a-z]+.picnic-supermarkt://([\\\\S]+)$\",\"errorMessage\":{\"pattern\":\"should be like: nl.picnic-supermarkt://...\"}},\"title\":{\"name\":\"title\",\"$id\":\"subHeader.subHeaderButton.title\",\"title\":\"Title\",\"type\":\"string\",\"minLength\":1,\"errorMessage\":{\"minLength\":\"should not be empty\"}},\"textColor\":{\"name\":\"textColor\",\"$id\":\"subHeader.subHeaderButton.textColor\",\"title\":\"text Color\",\"type\":\"string\",\"minLength\":1,\"errorMessage\":{\"minLength\":\"should not be empty\"}},\"backgroundColor\":{\"name\":\"backgroundColor\",\"$id\":\"subHeader.subHeaderButton.backgroundColor\",\"title\":\"Background Color\",\"type\":\"string\",\"minLength\":1,\"errorMessage\":{\"minLength\":\"should not be empty\"}},\"icon\":{\"name\":\"icon\",\"$id\":\"subHeader.subHeaderButton.icon\",\"title\":\"Icon\",\"type\":\"string\",\"minLength\":1,\"errorMessage\":{\"minLength\":\"should not be empty\"}}},\"errorMessage\":{\"required\":{\"deeplink\":\"Subheader Button deeplink is required\",\"title\":\"Subheader Button title is required\",\"textColor\":\"Subheader Button textColor is required\"}}}},\"errorMessage\":{\"required\":{\"title\":\"Subheader title is required\"}}},\"aspectRatio\":{\"name\":\"aspectRatio\",\"$id\":\"aspectRatio\",\"title\":\"Aspect Ratio\",\"type\":\"string\",\"minLength\":1,\"pattern\":\"\\\\([0-9]+( ?)/( ?)[0-9]+\\\\)\",\"errorMessage\":{\"minLength\":\"Aspect ratio is required\",\"pattern\":\"Aspect Ratio must match pattern of (number / number)\"}},\"userTag\":{\"name\":\"userTag\",\"$id\":\"userTag\",\"title\":\"User Tag\",\"type\":\"string\",\"minLength\":20,\"pattern\":\"^$|^'.*'$\",\"errorMessage\":{\"minLength\":\"User tag is required\",\"pattern\":\"If defined, must start and end with a single quote: 'userTag'\"}},\"horizontalCardItems\":{\"name\":\"horizontalCardItems\",\"$id\":\"horizontalCardItems\",\"title\":\"Items\",\"type\":\"array\",\"asObject\":true,\"items\":{\"name\":\"horizontalCardItem\",\"$id\":\"horizontalCardItem\",\"type\":\"object\",\"title\":\"Item\",\"required\":[\"deeplink\",\"backgroundImage\"],\"dependentRequired\":{\"labelText\":[\"labelTextColor\",\"labelBackgroundColor\"]},\"properties\":{\"deeplink\":{\"name\":\"deeplink\",\"$id\":\"horizontalCardItem.deeplink\",\"title\":\"Deeplink\",\"type\":\"string\",\"pattern\":\"^[a-z]+.picnic-supermarkt://([\\\\S]+)$\",\"errorMessage\":{\"pattern\":\"should be like: nl.picnic-supermarkt://...\"}},\"backgroundImage\":{\"name\":\"backgroundImage\",\"$id\":\"horizontalCardItem.backgroundImage\",\"title\":\"Background Image\",\"type\":\"string\",\"minLength\":1,\"errorMessage\":{\"minLength\":\"should not be empty\"}},\"title\":{\"name\":\"title\",\"$id\":\"horizontalCardItem.title\",\"title\":\"Title\",\"type\":\"string\",\"minLength\":1},\"subtitle\":{\"name\":\"subtitle\",\"$id\":\"horizontalCardItem.subtitle\",\"title\":\"Subtitle\",\"type\":\"string\"},\"labelText\":{\"name\":\"labelText\",\"$id\":\"horizontalCardItem.labelText\",\"title\":\"Label Text\",\"type\":\"string\"},\"labelTextColor\":{\"name\":\"labelTextColor\",\"$id\":\"horizontalCardItem.labelTextColor\",\"title\":\"Label TextColor\",\"type\":\"string\"},\"labelBackgroundColor\":{\"name\":\"labelBackgroundColor\",\"$id\":\"horizontalCardItem.labelBackgroundColor\",\"title\":\"Label BackgroundColor\",\"type\":\"string\"},\"accessibilityLabel\":{\"name\":\"accessibilityLabel\",\"$id\":\"horizontalCardItem.accessibilityLabel\",\"title\":\"Accessibility Label\",\"type\":\"string\"}}}}},\"errorMessage\":{\"required\":{\"aspectRatio\":\"Please enter aspect Ratio\",\"horizontalCardItems\":\"Please enter card Items\",\"userTag\":\"Please enter user Tag\"}}}"
    }
}
